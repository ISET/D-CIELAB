function stimulus = createStimulusStruct(img, cmap, seq, timing, fixseq)%% function createStimulusStruct(img, cmap, [seq],[timing],[fixseq])%    Creates an stimulus structure with input parameter as fields%%  Inputs:%    img       - array of images%    cmap      - array of display gamma tables%    seq       - array of indices into images and cmaps%    seqtiming - array of times associated with stimulus.seq%    fixSeq    -  binary array associated with fixation of seq%  %  Output:%    stimulus  - stimulus structure with parameters set / initialized%%  Example:%    stimulus = createStimulusStruct(img,cmap,1,[],1);%%  History:%    (JW) Sep, 2008 - write first version %    (HJ) Aug, 2013 - simplied interface, increase compatibility%% Check inputsif nargin < 1, error('Image array required'); endif nargin < 2, error('Gamma table required'); endif nargin < 3, seq = 1; endif nargin < 4, timing = []; end % No wait for each frameif nargin < 5, fixseq = ones(length(seq),1); end % Draw fixation to allif(~iscell(img)), img = {img}; endif isempty(seq),  seq = 1; end%% Create stimulus structure%  Initstimulus = [];%  Set parametersstimulus.images    = img;stimulus.cmap      = cmap;stimulus.seq       = seq;stimulus.seqtiming = timing;stimulus.fixSeq    = fixseq;% Init fields for future usesstimulus.textures  = [];stimulus.srcRect   = [];stimulus.destRect  = [];end